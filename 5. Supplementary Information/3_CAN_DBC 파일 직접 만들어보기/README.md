# CAN DBC 파일 직접 만들어보기

## 강의 개요

이번 강의에서는 CAN DBC 파일을 실제로 생성하고 구성하는 실습을 진행한다. CANdb++ 툴을 사용하여 DBC 파일의 각종 설정을 직접 체험해본다.

<br>

## 1. CANdb++ 툴 다운로드 및 설치

### 다운로드 경로
1. 구글에서 "Vector" 검색
2. Vector 홈페이지 접속
3. 상단 메뉴: 제품 및 서비스 → 제품 목록 → 소프트웨어
4. **CAN DB++** 선택

### 툴 버전
- **유료 버전**: 고급 기능 포함
- **무료 버전**: 기본 기능 제공 (정확한 차이점 불명)
- 무료 버전 다운로드 가능

### 설치 및 실행
- 설치 파일 다운로드 후 컴퓨터에 설치
- **CANdb.exe** 파일 실행

<br>

## 2. DBC 파일 생성

### 새 파일 생성 vs 기존 파일 열기

**기존 파일 열기**
- 상단 메뉴: 파일 → Open Database
- 기존 DBC 파일 선택

**새 파일 생성**
- 상단 메뉴: **Create Database** 선택
- 템플릿 선택: **Basic Template** 권장
- 파일명 지정 (예: Test_dbc)
- 확장자 자동 생성: **.dbc**

<br>

## 3. 네트워크 설정

### 통신 프로토콜 설정
1. 왼쪽 **네트워크 탭**에서 생성된 DBC 파일명 더블클릭
2. 통신 프로토콜 선택
   - **CAN 통신**
   - **CAN FD**
3. 원하는 프로토콜 선택 후 확인

<br>

## 4. 메시지 생성 및 설정

### 메시지 생성
1. 왼쪽 **메시지** 선택
2. 마우스 우클릭 → **New** 선택
3. 메시지 기본 정보 입력

### 메시지 속성 설정

**기본 정보**
- **메시지 이름**: 사용자 정의
- **메시지 ID**: 고유 식별자
- **데이터 영역 길이**: 바이트 단위

**메시지 타입**
- **Standard**: 11bit ID
- **Extended**: 29bit ID

**CAN FD 설정**
- **CAN Standard**: High Speed CAN 메시지 (최대 8바이트)
- **CAN FD Standard**: CAN FD 메시지 (8바이트 초과 가능)

### 제한사항
- High-Speed CAN: DLC 값 최대 8
- CAN FD: DLC 값 8 초과 설정 가능

<br>

## 5. 네트워크 노드(제어기) 설정

### 노드 생성
1. 왼쪽 **Network Node** 선택
2. 마우스 우클릭 → **New** 선택
3. 제어기 이름 입력
4. 필요한 만큼 여러 노드 생성

### 용도
- 네트워크에 참여하는 제어기 정의
- 송신/수신 관계 설정의 기초

<br>

## 6. 시그널 생성 및 설정

### 시그널 생성
1. 왼쪽 **Signal** 선택
2. 마우스 우클릭 → **New** 선택

### 시그널 속성 설정

**기본 정보**
- **시그널 이름**: 사용자 정의
- **시그널 길이**: bit 단위 (byte 아님)

**데이터 처리**
- **Factor**: 배율
- **Offset**: 오프셋
- **Min/Max**: 최소/최대값
- **Init Value**: 초기값

### 시그널 메시지 할당

**할당 과정**
1. 대상 메시지 더블클릭
2. 시그널 탭에서 **Add** 버튼 클릭
3. 생성된 시그널들 선택 후 할당

**레이아웃 설정**
1. 메시지 설정에서 **Layout** 버튼 클릭
2. 8바이트 데이터 영역에 시그널 배치 확인
3. 마우스 드래그로 시그널 위치 조정
4. **Start Bit** 위치 변경 가능

<br>

## 7. 송신/수신 설정

### 트랜스미터(송신자) 설정

**설정 과정**
1. 메시지 더블클릭
2. **트랜스미터** 탭 선택
3. **Add** 버튼 클릭
4. 송신할 노드 선택
5. 확인 후 저장

**특징**
- 메시지 단위로 설정
- 하나의 메시지당 하나의 송신자

### 리시버(수신자) 설정

**설정 과정**
1. 수신할 **노드를 더블클릭**
2. **Mapped Rx Signal** 선택
3. **Add** 버튼 클릭
4. 수신할 시그널들 선택
5. 확인 후 저장

**특징**
- 시그널 단위로 설정
- 메시지가 아닌 노드에서 설정
- 여러 시그널을 동시에 선택 가능

### 설정 확인
- 메시지 더블클릭 → 리시버 탭에서 설정된 수신자 확인
- 송신/수신 관계가 올바르게 설정되었는지 검증

<br>

## 8. DBC 파일 활용

### 완성된 DBC 파일의 용도

**정보 확인**
- DBC 파일만으로 CAN 통신 관련 모든 정보 확인 가능
- 메시지, 시그널, 노드 정보 통합 관리

**실무 활용**
- 신규 DBC 파일 생성
- 기존 DBC 파일 전달받아 활용
- 다른 툴로 임포트하여 추가 기능 활용

### 업무 흐름
1. DBC 파일 수신 또는 생성
2. 파일 열어서 네트워크 정보 확인
3. 필요시 다른 개발 툴로 임포트
4. 소프트웨어 개발에 활용

<br>

## 9. 실습 결과

### 생성된 구성요소
- **네트워크**: CAN FD 프로토콜 설정
- **메시지**: 테스트 메시지 1개 생성
- **노드**: 테스트 노드 2개 생성
- **시그널**: 테스트 시그널 2개 생성
- **송수신 관계**: 노드 1 → 메시지 송신, 노드 2 → 시그널 수신

### 설정 완료 사항
- 메시지 타입 및 ID 설정
- 시그널 속성 및 레이아웃 설정
- 트랜스미터/리시버 관계 설정
- 파일 저장 (.dbc 확장자)

<br>

## 결론

CANdb++ 툴을 사용하여 CAN DBC 파일을 실제로 생성해보았다. 네트워크 설정부터 메시지, 시그널, 노드 구성까지 전체적인 DBC 파일 생성 과정을 체험했으며, 이를 통해 CAN 통신의 전체 구조를 파악할 수 있었다.
